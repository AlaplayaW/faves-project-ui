<div class="add-review card flex flex-column gap-4 h-full p-2">
  <!-- Boutons pour choisir le type -->
  <ng-container *ngIf="itemType === undefined">
    <p-button class="review-btn w-full" label="Livre" styleClass="p-button-raised"
      (click)="toggleEditor('book')"></p-button>
    <p-button class="review-btn w-full" label="Film" styleClass="p-button-raised"
      (click)="toggleEditor('movie')"></p-button>
  </ng-container>

  <!-- Si le type est 'book' ou 'movie' -->
  <ng-container *ngIf="(itemType === 'book' || itemType === 'movie') && !isSelected">
    <form [formGroup]="searchForm!">
      <p-autoComplete formControlName="selectedItem" [suggestions]="suggestions!" [dropdown]="true"
        (completeMethod)="filterItem(itemType, $event)" (onSelect)="onSelect()" field="title"
        [placeholder]="searchPlaceholder" styleClass="w-full"></p-autoComplete>
    </form>
  </ng-container>


  <!-- Si le formulaire de création d'un review est affiché -->
  <ng-container *ngIf="showCreateReviewForm">
    <!-- Si un item est sélectionné -->
    <div *ngIf="itemToReview !== undefined" class="card flex flex-column gap-3">
      <app-item-card [item]="itemToReview"></app-item-card>
    </div>
    <div>
      <!-- Créer une nouvelle critique -->
      <!-- <app-create-review-form></app-create-review-form> -->
      <form [formGroup]="createReviewForm" (ngSubmit)="onSubmit()" class="create-review-form gap-3 flex flex-column">
        <label for="rating">Note : {{ this.createReviewForm.value.rating }}</label>
        <p-slider formControlName="rating" [step]="1" [min]="0" [max]="10"></p-slider>

        <label for="comment">Commentaire</label>
        <textarea formControlName="comment" rows="5" cols="30" pInputTextarea></textarea>

        <p-button styleClass="w-full" type="submit" label="Envoyer" [disabled]="!createReviewForm.valid"></p-button>
      </form>
    </div>
  </ng-container>
</div>